<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="theme-color" content="#0a3d62" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <title>Battle</title>
    <link rel="manifest" href="/mathmonsters/manifest.webmanifest" />
    <link rel="apple-touch-icon" sizes="300x300" href="/mathmonsters/images/brand/logo.png" />
    <link rel="stylesheet" href="/mathmonsters/css/global.css" />
    <link rel="stylesheet" href="/mathmonsters/css/question.css" />
    <link rel="stylesheet" href="/mathmonsters/css/battle.css" />
  </head>
  <body>
  <div class="battle-stat-banner" aria-live="polite">
    <div class="stat">
      <span class="label">Accuracy</span>
      <span class="value" data-banner-accuracy>0%</span>
    </div>
    <div class="stat">
      <span class="label">Time</span>
      <span class="value" data-banner-time>0s</span>
    </div>
  </div>
  <div class="battle-dev-controls" role="group" aria-label="Battle test controls">
    <button type="button" class="battle-dev-controls__btn" data-dev-set-streak>
      Set Streak 4
    </button>
    <button type="button" class="battle-dev-controls__btn" data-dev-end-battle>
      End Battle
    </button>
    <button type="button" class="battle-dev-controls__btn" data-dev-reset-level>
      Reset Level 1
    </button>
    <button type="button" class="battle-dev-controls__btn" data-dev-log-out>
      Log Out
    </button>
  </div>
  <div id="battle">
    <img id="battle-monster" src="/mathmonsters/images/battle/monster_battle_1.png" alt="Monster" />
    <img
      id="battle-shellfin"
      src="/mathmonsters/images/characters/shellfin_level_1.png"
      alt="Shellfin"
    />
    <div id="monster-stats" class="stat-box">
      <div class="name"></div>
      <div
        class="progress progress--orange stat-box__progress"
        data-hp-progress
        data-hp-target="monster"
        role="progressbar"
        aria-valuemin="0"
        aria-valuemax="100"
        aria-valuenow="100"
        style="--progress-value: 1"
      >
        <span class="progress__fill"></span>
      </div>
    </div>
    <div id="shellfin-stats" class="stat-box">
      <div class="name"></div>
      <div
        class="progress progress--orange stat-box__progress"
        data-hp-progress
        data-hp-target="hero"
        role="progressbar"
        aria-valuemin="0"
        aria-valuemax="100"
        aria-valuenow="100"
        style="--progress-value: 1"
      >
        <span class="progress__fill"></span>
      </div>
    </div>
  </div>
    <div id="question">
      <div class="content">
        <img class="streak-icon" src="/mathmonsters/images/questions/streak.svg" alt="Streak" />
        <div class="top-bar">
          <div class="progress-wrap">
            <div class="streak-label"></div>
            <div class="progress-bar">
              <div class="progress-fill"></div>
            </div>
          </div>
        </div>
        <p class="question-text"></p>
        <div class="choices"></div>
        <button type="button">Submit</button>
      </div>
    </div>
    <div
      id="complete-message"
      role="dialog"
      aria-modal="true"
      aria-labelledby="battle-complete-title"
      aria-hidden="true"
      tabindex="-1"
    >
      <section class="card card--pop battle-complete-card">
        <div class="battle-info">
          <p id="battle-complete-title" class="battle-title">Battle<br />Complete</p>
        </div>
        <img
          class="enemy-image"
          src="/mathmonsters/images/battle/monster_battle_1.png"
          alt="Enemy defeated in battle"
        />
        <p class="battle-goals-title">Battle Goals</p>
        <div class="battle-stats">
          <div class="battle-stat" data-goal="accuracy">
            <span class="stat-label">Accuracy</span>
            <span class="stat-value summary-accuracy">
              <span class="stat-value-text">0%</span>
            </span>
          </div>
          <div class="battle-stat" data-goal="time">
            <span class="stat-label">Time</span>
            <span class="stat-value summary-time">
              <span class="stat-value-text">0s</span>
            </span>
          </div>
        </div>
        <button type="button" class="btn-primary next-mission-btn" data-action="next">Next Mission</button>
      </section>
    </div>
    <div id="battle-message">
      <div class="content">
        <p></p>
        <button type="button" class="btn-primary">Try Again</button>
      </div>
    </div>
    <script src="/mathmonsters/js/pwa.js" defer data-pwa-root="/mathmonsters"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="/mathmonsters/js/supabaseClient.js"></script>
    <script src="/mathmonsters/js/loader.js"></script>
    <script src="/mathmonsters/js/battle.js"></script>
    <script src="/mathmonsters/js/question.js"></script>
  </body>
</html>
