{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Math Monsters Data Schemas",
  "definitions": {
    "SpriteAsset": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "minLength": 1
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "sprite": {
          "type": "string",
          "minLength": 1
        }
      },
      "required": [
        "sprite"
      ],
      "additionalProperties": false
    },
    "CharacterStats": {
      "type": "object",
      "properties": {
        "attack": {
          "type": "integer",
          "minimum": 0
        },
        "health": {
          "type": "integer",
          "minimum": 0
        },
        "damage": {
          "type": "integer",
          "minimum": 0
        }
      },
      "additionalProperties": false
    },
    "CharacterProfile": {
      "allOf": [
        {
          "$ref": "#/definitions/SpriteAsset"
        },
        {
          "$ref": "#/definitions/CharacterStats"
        },
        {
          "type": "object",
          "properties": {
            "attackSprite": {
              "type": "string",
              "minLength": 1
            },
            "attackSprites": {
              "type": "object",
              "properties": {
                "basic": {
                  "type": "string",
                  "minLength": 1
                },
                "super": {
                  "type": "string",
                  "minLength": 1
                }
              },
              "additionalProperties": false
            }
          },
          "additionalProperties": false
        }
      ]
    },
    "MonsterSelection": {
      "type": "object",
      "properties": {
        "sprite": {
          "type": "string",
          "minLength": 1
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "id": {
          "type": "string",
          "minLength": 1
        },
        "attack": {
          "type": "integer",
          "minimum": 0
        },
        "health": {
          "type": "integer",
          "minimum": 0
        },
        "damage": {
          "type": "integer",
          "minimum": 0
        },
        "spritePool": {
          "type": "string",
          "minLength": 1
        },
        "pool": {
          "type": "string",
          "minLength": 1
        }
      },
      "minProperties": 1,
      "additionalProperties": false
    },
    "MonsterPool": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/MonsterSelection"
      },
      "minItems": 1
    },
    "MonsterSpriteConfig": {
      "type": "object",
      "properties": {
        "uniquePerLevel": {
          "type": "boolean"
        },
        "bosses": {
          "type": "object",
          "patternProperties": {
            "^\\d+$": {
              "$ref": "#/definitions/MonsterSelection"
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": {
        "anyOf": [
          {
            "$ref": "#/definitions/MonsterPool"
          },
          {
            "$ref": "#/definitions/MonsterSelection"
          }
        ]
      }
    },
    "QuestionReference": {
      "type": "object",
      "properties": {
        "path": {
          "type": "string",
          "pattern": "^questions/.+\\.json$"
        }
      },
      "required": [
        "path"
      ],
      "additionalProperties": false
    },
    "BattleConfig": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "minLength": 1
        },
        "questions": {
          "$ref": "#/definitions/QuestionReference"
        },
        "questionReference": {
          "type": "object",
          "properties": {
            "file": {
              "type": "string",
              "pattern": "^questions/.+\\.json$"
            }
          },
          "required": [
            "file"
          ],
          "additionalProperties": false
        },
        "hero": {
          "$ref": "#/definitions/CharacterProfile"
        },
        "monster": {
          "$ref": "#/definitions/MonsterSelection"
        },
        "monsters": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/MonsterSelection"
          }
        },
        "levelUp": {
          "type": "integer",
          "minimum": 0
        },
        "accuracyGoal": {
          "type": "number",
          "minimum": 0,
          "maximum": 1
        },
        "timeGoalSeconds": {
          "type": "integer",
          "minimum": 0
        }
      },
      "required": [
        "questions"
      ],
      "additionalProperties": false
    },
    "LevelConfig": {
      "type": "object",
      "properties": {
        "level": {
          "type": "integer",
          "minimum": 1
        },
        "currentLevel": {
          "type": "integer",
          "minimum": 1
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "mathType": {
          "type": "string",
          "minLength": 1
        },
        "battles": {
          "type": "array",
          "minItems": 1,
          "items": {
            "$ref": "#/definitions/BattleConfig"
          }
        },
        "battle": {
          "$ref": "#/definitions/BattleConfig"
        }
      },
      "required": [
        "level",
        "name",
        "battles"
      ],
      "additionalProperties": false
    },
    "MathType": {
      "type": "object",
      "properties": {
        "label": {
          "type": "string",
          "minLength": 1
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "defaultStats": {
          "$ref": "#/definitions/CharacterStats"
        },
        "monsterSprites": {
          "$ref": "#/definitions/MonsterSpriteConfig"
        },
        "levels": {
          "type": "array",
          "minItems": 1,
          "items": {
            "$ref": "#/definitions/LevelConfig"
          }
        }
      },
      "required": [
        "levels"
      ],
      "additionalProperties": false
    },
    "MathContent": {
      "type": "object",
      "properties": {
        "mathTypes": {
          "type": "object",
          "minProperties": 1,
          "additionalProperties": {
            "$ref": "#/definitions/MathType"
          }
        }
      },
      "required": [
        "mathTypes"
      ],
      "additionalProperties": false
    },
    "MathProgress": {
      "type": "object",
      "properties": {
        "currentLevel": {
          "type": "integer",
          "minimum": 1
        }
      },
      "required": [
        "currentLevel"
      ],
      "additionalProperties": false
    },
    "CurrentLevelProgress": {
      "type": "object",
      "properties": {
        "hero": {
          "$ref": "#/definitions/CharacterProfile"
        }
      },
      "additionalProperties": false
    },
    "PlayerProfile": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "minLength": 1
        },
        "hero": {
          "$ref": "#/definitions/CharacterProfile"
        },
        "currentMathType": {
          "type": "string",
          "minLength": 1
        },
        "gems": {
          "type": "integer",
          "minimum": 0
        },
        "progress": {
          "type": "object",
          "minProperties": 1,
          "additionalProperties": {
            "$ref": "#/definitions/MathProgress"
          }
        },
        "currentLevel": {
          "type": "object",
          "additionalProperties": {
            "$ref": "#/definitions/CurrentLevelProgress"
          }
        },
        "battleVariables": {
          "type": "object",
          "properties": {
            "timeRemainingSeconds": {
              "type": "integer",
              "minimum": 0
            }
          },
          "additionalProperties": false
        }
      },
      "required": [
        "id",
        "hero",
        "currentMathType",
        "gems",
        "progress"
      ],
      "additionalProperties": false
    },
    "QuestionOption": {
      "type": [
        "number",
        "string"
      ]
    },
    "QuestionEntry": {
      "type": "object",
      "properties": {
        "id": {
          "type": "integer",
          "minimum": 1
        },
        "question": {
          "type": "string",
          "minLength": 1
        },
        "options": {
          "type": "array",
          "minItems": 2,
          "items": {
            "$ref": "#/definitions/QuestionOption"
          }
        },
        "answer": {
          "$ref": "#/definitions/QuestionOption"
        }
      },
      "required": [
        "id",
        "question",
        "options",
        "answer"
      ],
      "additionalProperties": false
    },
    "QuestionSet": {
      "type": "object",
      "properties": {
        "questions": {
          "type": "array",
          "minItems": 1,
          "items": {
            "$ref": "#/definitions/QuestionEntry"
          }
        }
      },
      "required": [
        "questions"
      ],
      "additionalProperties": false
    }
  }
}
