/* index.css — FULL SWAP-IN */
/* Math Monsters — single global stylesheet (iOS 17-ish, playful, minimal) */

:root{
  --mm-font: "Arial Rounded MT Bold", "Arial Rounded", Arial, sans-serif;

  --button-gradient-start: #0095ff;
  --button-gradient-end: #006aff;

  --ink: #0D1420;
  --ink2: rgba(13,20,32,.70);
  --white: #FFFFFF;

  --card:  rgba(255,255,255);
  --glass: rgba(255,255,255,.22);
  --glass2: rgba(255,255,255,.14);
  --stroke: rgba(255,255,255,.22);
  --shadow: 0 18px 40px rgba(0,0,0,.22);
  --shadow2: 0 10px 22px rgba(0,0,0,.18);

  --accent: #2FD1FF;
  --accent2:#6CFFB8;
  --danger: #FF5B6E;

  --r-xl: 28px;
  --r-lg: 22px;
  --r-md: 16px;

  --pad: 16px;
  --gap: 24px;

  --safe-top: env(safe-area-inset-top, 0px);
  --safe-right: env(safe-area-inset-right, 0px);
  --safe-bottom: env(safe-area-inset-bottom, 0px);
  --safe-left: env(safe-area-inset-left, 0px);

  --spring: cubic-bezier(.2,.9,.2,1);
  --fast: 180ms;
  --med: 360ms;

  /* Battle pacing scale (JS also slows battle pauses). */
  --battle-scale: 1;

  --hero-size: 300px;
  --monster-size: 300px;
}

/* Slow animations while in battle */
body.is-battle{
  --battle-scale: 1.5;
  --fast: 270ms;
  --med: 540ms;
}

*{ box-sizing:border-box; -webkit-tap-highlight-color: transparent; }
html,body{ height:100%; }

body.mm{
  margin:0;
  font-family: var(--mm-font);
  color: var(--white);
  /* App default background (Home/Battle/etc.) */
  background-color: #0026ac;
  background-image: linear-gradient(
    180deg,
    #2675ff 0%,
    #0026ac 100%
  );
  overflow:hidden;
}

#app{ position:relative; z-index: 2; }
.mm-bg{ z-index: 0; }


button, input, select, textarea{
  font-family: inherit;
}

.mm-bg,
.mm-bubbles,
.mm-bubble,
.mm-vignette{
  pointer-events: none;
}


/* Landing + Loader use a solid deep-ocean background */
body.is-landing,
body.is-loader{
  background-color: #001b41;
  background-image: none;
}

/* Remove bubbles on Landing + Loader */
body.is-landing .mm-bubbles,
body.is-loader .mm-bubbles{
  display: none;
}

.mm-bg{ position:fixed; inset:0; pointer-events:none; }
.mm-vignette{
  position:absolute; inset:-20%;
  background: radial-gradient(circle at 50% 20%, transparent 0 55%, rgba(0,0,0,.30) 85%, rgba(0,0,0,.50) 100%);
  filter: blur(0px);
}
.mm-bubbles{ position:absolute; inset:0; overflow:hidden; }

.mm-bubble{
  position:absolute;
  width: 10px; height: 10px;
  border-radius: 999px;
  background: rgba(255,255,255,.18);
  box-shadow: 0 0 0 1px rgba(255,255,255,.64) inset;
  transform: translate3d(0,0,0);
  animation: bubbleRise linear infinite;
}
@keyframes bubbleRise{
  from{ transform: translate3d(0, 16vh, 0); opacity: 0; }
  10%{ opacity: .55; }
  to{ transform: translate3d(0, -120vh, 0); opacity: 0; }
}

.mm-app{
  position:relative;
  height:100%;
  padding: calc(var(--pad) + var(--safe-top)) calc(var(--pad) + var(--safe-right))
           calc(var(--pad) + var(--safe-bottom)) calc(var(--pad) + var(--safe-left));
  display:flex;
  align-items:stretch;
  justify-content:center;
}

.mm-shell{
  width:min(450px, 100%);
  margin: 0 auto;
  display:flex;
  flex-direction:column;
  gap: var(--gap);
  height: 100%;
  min-height: 100%;
}

/* (Topbar removed everywhere per spec) */

.mm-card{
  background: var(--card);
  color: var(--ink);
  border-radius: var(--r-md);
  box-shadow: var(--shadow);
  border: 1px solid rgba(255,255,255,.35);
  overflow:hidden;
  width: 100%;
}
.mm-card__pad{ padding: 16px; }

.mm-glass{
  background: linear-gradient(180deg, rgba(255,255,255,.22), rgba(255,255,255,.12));
  border: 1px solid rgba(255,255,255,.20);
  box-shadow: var(--shadow2);
  backdrop-filter: blur(18px);
  -webkit-backdrop-filter: blur(18px);
  border-radius: var(--r-lg);
}

.mm-stack{ display:flex; flex-direction:column; gap: 10px; }
.mm-row{ display:flex; gap: 10px; align-items:center; }
.mm-row--between{ justify-content:space-between; }

.mm-field{
  display:flex;
  flex-direction:column;
  gap: 6px;
}
.mm-label{
  font-size: 12px;
  color: rgba(13,20,32,.65);
  font-weight: 700;
}
.mm-input, .mm-select{
  appearance:none;
  width:100%;
  border-radius: 14px;
  border: 1px solid rgba(13,20,32,.10);
  background: rgba(255,255,255,.90);
  padding: 12px 12px;
  font-size: 16px;
  font-weight: 700;
  color: var(--ink);
  outline:none;
}
.mm-input:focus, .mm-select:focus{ border-color: rgba(47,209,255,.65); box-shadow: 0 0 0 4px rgba(47,209,255,.18); }

.mm-btn{
  width:100%;
  border:0;
  border-radius: 18px;
  padding: 14px 14px;
  font-size: 16px;
  font-weight: 900;
  color: var(--ink);
  background: rgba(255,255,255,.92);
  box-shadow: 0 14px 26px rgba(0,0,0,.18);
  transform: translate3d(0,0,0);
  transition: transform var(--fast) var(--spring), filter var(--fast) var(--spring), opacity var(--fast) var(--spring);
}
.mm-btn:active{ transform: translate3d(0,2px,0) scale(.99); filter: brightness(.98); }
.mm-btn[disabled]{ opacity:.45; transform:none; }

.button--primary {
  background: linear-gradient(
    180deg,
    var(--button-gradient-start),
    var(--button-gradient-end)
  );
  color: #ffffff;
  border: none;
}

.mm-btn--ghost{
  color: var(--white);
  background: rgba(255,255,255,.14);
  border: 1px solid rgba(255,255,255,.18);
  box-shadow: none;
}
.mm-btn--danger{
  color: #2B0C10;
  background: linear-gradient(180deg, rgba(255,91,110,.96), rgba(255,91,110,.70));
}

.mm-pill{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  padding: 8px 12px;
  border-radius: 999px;
  color: rgba(255,255,255,.92);
  font-weight: 950;
  font-size: 16px;
  letter-spacing: .2px;
  background: rgba(255,255,255,.14);
  border: 1px solid rgba(255,255,255,.18);
}

/* ================================
   Universal Progress Component
================================ */

.mm-progress{
  --progress-height: 12px;
  --progress-bg: rgba(255,255,255,.25);
  --progress-border: rgba(255,255,255,.9);
  --progress-shadow: 0 4px 24px rgba(0,0,0,.24);
  --progress-blur: 6px;

  --progress-gradient-start: #36dc36;
  --progress-gradient-end: #00b600;

  position: relative;
  width: 100%;
  height: var(--progress-height);
  border-radius: 999px;
  background: var(--progress-bg);
  box-shadow: var(--progress-shadow);
  overflow: hidden;

  backdrop-filter: blur(var(--progress-blur));
  -webkit-backdrop-filter: blur(var(--progress-blur));
}

/* Fill */
.mm-progress > .mm-progress__fill{
  position: absolute;
  inset: 0 auto 0 0;
  width: 0%;
  border-radius: 999px;

  /* ✅ TOP → BOTTOM */
  background: linear-gradient(
    180deg,
    var(--progress-gradient-start),
    var(--progress-gradient-end)
  );

  transition: width 520ms var(--spring);
}

/* Inner shine */
.mm-progress > .mm-progress__fill::after{
  content:"";
  position:absolute;
  inset: 2px 5px 0 2px;
  height: 5px;
  border-radius: 999px;
  background: #ffffff64;
  pointer-events:none;
}

/* Sizes (FIXED — moved OUTSIDE :root) */
.mm-progress--sm{ --progress-height: 10px; }
.mm-progress--md{ --progress-height: 14px; }
.mm-progress--lg{ --progress-height: 18px; }

/* Context presets */
.mm-progress--xp{
  --progress-gradient-start: #5de75d;
  --progress-gradient-end: #00c853;
}
.mm-progress--hp{
  --progress-gradient-start: #ff6b6b;
  --progress-gradient-end: #ff2d2d;
}
.mm-progress--mana{
  --progress-gradient-start: #5da9ff;
  --progress-gradient-end: #006aff;
}

.mm-screen{
  position:relative;
  height:100%;
  display:flex;
  flex-direction:column;
  gap: var(--gap);
}

.mm-screen__grow{ flex:1 1 auto; display:flex; flex-direction:column; gap: var(--gap); }
.mm-center{ align-items:center; justify-content:center; text-align:center; }

.mm-hero{
  width: min(400px, 100%);
  justify-content: space-between;
  text-align: center;
  margin: 0 auto;
  display:flex;
  flex-direction:column;
  gap: 12px;
  align-items: center;
  height: 100%;
  min-height: 100%;
  padding: 16px 0;
}

/* Group wrappers */
.mm-homeTop{
  width: 100%;
  display:flex;
  flex-direction: column;
  align-items: center;
  gap: var(--gap);
}
.mm-homeBtns{
  width: 100%;
  display:flex;
  flex-direction: column;
  gap: var(--gap);
}

.mm-big{
  font-size: 36px;
  font-weight: 950;
  letter-spacing: -.2px;
  color: var(--white);
}
.mm-muted{ color: rgba(255,255,255,.74); font-weight: 700; font-size: 14px; }

.mm-art{
  width: 300px;
  height: 300px;
  aspect-ratio: 1 / 1;
  overflow: visible;
  position:relative;
}
.mm-art img{
  position:absolute; inset:0;
  width:100%; height:100%;
  object-fit: contain;
  transform: translateZ(0);
}

@keyframes mmSwim{
  0%   { transform: translate3d(0px,   0px, 0) rotate(-2deg); }
  12%  { transform: translate3d(18px, -10px, 0) rotate(-0.8deg); }
  33%  { transform: translate3d(6px,  -44px, 0) rotate(2.8deg); }
  58%  { transform: translate3d(-26px,-28px, 0) rotate(1.1deg); }
  79%  { transform: translate3d(-10px, -8px, 0) rotate(-1.6deg); }
  100% { transform: translate3d(0px,   0px, 0) rotate(-2deg); }
}

body.is-home .mm-homeSwim{
  animation: mmSwim 10.5s cubic-bezier(.38,0,.22,1) infinite;
  will-change: transform;
  transform-origin: 50% 65%;
}


.mm-battleStage{
  position: relative;
  flex: 1 1 auto;
  overflow:hidden;
}

.mm-sprite{
  position:absolute;
  width: var(--hero-size);
  height: var(--hero-size);
  object-fit: contain;
  filter: drop-shadow(0 16px 18px rgba(0,0,0,.25));
  opacity: 0;
  transform: translate3d(0,18px,0) scale(.98);
}
.mm-sprite.is-in{
  opacity: 1;
  transition: transform var(--med) var(--spring), opacity var(--med) var(--spring);
}
.mm-sprite.hero{ left: 10px; bottom: 10px; }
.mm-sprite.monster{ right: 10px; top: 10px; width: var(--monster-size); height: var(--monster-size); }

.mm-stat{
  position:absolute;
  width: min(220px, 46vw);
  padding: 10px 10px;
  border-radius: 18px;
}
.mm-stat.hero{ left: 14px; bottom: calc(10px + var(--hero-size) * .42); }
.mm-stat.monster{ right: 14px; top: calc(10px + var(--monster-size) * .42); }

.mm-stat__name{
  font-weight: 950;
  color: rgba(255,255,255,.92);
  font-size: 14px;
  letter-spacing: .2px;
}
.mm-stat .mm-progress{ height: 10px; background: rgba(255,255,255,.20); border: 1px solid rgba(255,255,255,.18); }

/* ✅ FIX: your markup uses .mm-progress__fill (not i) */
.mm-stat .mm-progress > .mm-progress__fill{
  background: linear-gradient(180deg, rgba(108,255,184,.95), rgba(47,209,255,.95));
}

.mm-attackFx{
  position:absolute;
  width: 180px; height: 180px;
  object-fit: contain;
  opacity: 0;
  transform: scale(.7);
  pointer-events:none;
  filter: drop-shadow(0 14px 16px rgba(0,0,0,.30));
}
.mm-attackFx.is-pop{
  opacity: 1;
  transform: scale(1);
  transition: transform calc(260ms * var(--battle-scale)) var(--spring), opacity calc(260ms * var(--battle-scale)) var(--spring);
}
.mm-attackFx.is-out{
  opacity: 0;
  transform: scale(.9);
  transition: transform calc(240ms * var(--battle-scale)) var(--spring), opacity calc(240ms * var(--battle-scale)) var(--spring);
}

.mm-lunge-hero{ animation: lungeHero calc(260ms * var(--battle-scale)) var(--spring) 1; }
.mm-lunge-monster{ animation: lungeMonster calc(260ms * var(--battle-scale)) var(--spring) 1; }

@keyframes lungeHero{
  0%{ transform: translate3d(0,0,0); }
  60%{ transform: translate3d(68px,-8px,0) scale(1.02); }
  100%{ transform: translate3d(0,0,0); }
}
@keyframes lungeMonster{
  0%{ transform: translate3d(0,0,0); }
  60%{ transform: translate3d(-68px,8px,0) scale(1.02); }
  100%{ transform: translate3d(0,0,0); }
}

.mm-qCard{
  position:absolute;
  left: 12px; right: 12px;
  bottom: 12px;
  border-radius: var(--r-md);
  background: rgba(255,255,255);
  color: var(--ink);
  box-shadow: var(--shadow);
  transform: translate3d(0, 24px, 0);
  opacity: 0;
}
.mm-qCard.is-up{
  opacity: 1;
  transform: translate3d(0,0,0);
  transition: transform var(--med) var(--spring), opacity var(--med) var(--spring);
}
.mm-qCard__pad{ padding: 14px; }

.mm-question{
  font-weight: 950;
  font-size: 28px;
  letter-spacing: -.2px;
  text-align:center;
}

.mm-answers{
  margin-top: 12px;
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
}
.mm-answer{
  border-radius: 18px;
  border: 1px solid rgba(13,20,32,.10);
  background: rgba(255,255,255,.96);
  padding: 14px 12px;
  font-weight: 950;
  font-size: 18px;
  text-align:center;
  transition: transform var(--fast) var(--spring), box-shadow var(--fast) var(--spring), border-color var(--fast) var(--spring);
}
.mm-answer:active{ transform: translate3d(0,2px,0) scale(.99); }
.mm-answer.is-selected{
  border-color: rgba(47,209,255,.55);
  box-shadow: 0 0 0 4px rgba(47,209,255,.18);
}

.mm-qActions{ margin-top: 12px; display:flex; gap: 10px; }
.mm-qActions .mm-btn{ padding: 12px 14px; border-radius: 18px; font-size: 15px; }

.mm-overlay{
  position: fixed;
  inset: 0;
  display:none;
  align-items:flex-end;
  justify-content:center;
  padding: calc(var(--pad) + var(--safe-top)) calc(var(--pad) + var(--safe-right))
           calc(var(--pad) + var(--safe-bottom)) calc(var(--pad) + var(--safe-left));
  background: rgba(0,0,0,.20);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
}
.mm-overlay.is-show{ display:flex; }

.mm-sheet{
  width: min(560px, 100%);
  border-radius: 28px;
  background: #ffffff;
  color: var(--ink);
  box-shadow: var(--shadow);
  border: 1px solid rgba(0,0,0,.06);
  transform: translate3d(0, 18px, 0);
  opacity: 0;
}
.mm-sheet.is-in{
  opacity: 1;
  transform: translate3d(0,0,0);
  transition: transform var(--med) var(--spring), opacity var(--med) var(--spring);
}
.mm-sheet__pad{ padding: 16px; }
.mm-sheet h2{ margin: 0 0 4px 0; font-size: 22px; font-weight: 950; letter-spacing: -.2px; }
.mm-sheet p{ margin: 0 0 12px 0; color: rgba(13,20,32,.70); font-weight: 800; }

/* Full-page loader */
.mm-loaderFull{
  width: 100%;
  height: 100%;
  display:flex;
  align-items:center;
  justify-content:center;
}
.mm-loaderFull__inner{
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap: 14px;
}
.mm-loaderLogo{
  width: 160px;
  height: 160px;
  object-fit: contain;
  filter: drop-shadow(0 14px 20px rgba(0,0,0,.25));
}
.mm-loaderTitle{
  font-size: 28px;
  font-weight: 950;
  letter-spacing: -.2px;
  color: rgba(255,255,255,.92);
}

.mm-spinner{
  width: 44px; height: 44px;
  border-radius: 999px;
  border: 4px solid rgba(255,255,255,.20);
  border-top-color: rgba(255,255,255,.85);
  animation: spin 900ms linear infinite;
}
@keyframes spin{ to{ transform: rotate(360deg); } }

.mm-toast{
  position: fixed;
  left: 50%;
  bottom: calc(16px + var(--safe-bottom));
  transform: translateX(-50%) translateY(20px);
  opacity: 0;
  background: rgba(0,0,0,.60);
  color: rgba(255,255,255,.92);
  padding: 10px 12px;
  border-radius: 999px;
  font-weight: 800;
  font-size: 13px;
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  transition: opacity 200ms var(--spring), transform 200ms var(--spring);
  pointer-events:none;
}
.mm-toast.is-show{ opacity: 1; transform: translateX(-50%) translateY(0); }

@media (max-height: 700px){
  :root{ --hero-size: clamp(150px, 38vw, 210px); --monster-size: clamp(150px, 38vw, 210px); }
  .mm-battleStage{ min-height: 320px; }
}

/* ---------- Landing Overrides (MM landing v2) ---------- */

.landing-wrap{
  width: 100%;
  max-width: 560px;
  margin: 0 auto;
  height: 100%;
  display: flex;
  flex-direction: column;
  justify-content: center;
  gap: 18px;
}

.landing-brand{
  display:flex;
  flex-direction: column;
  align-items:center;
  justify-content:center;
  gap: 14px;
}

.landing-logo{
  width: 160px;
  height: 160px;
  object-fit: contain;
}

.landing-title{
  font-size: 48px;
  font-weight: 800;
  letter-spacing: -0.3px;
  text-align: center;
  margin: 0;
}

.landing-tagline{
  font-size: 20px;
  font-weight: 400;
  line-height: 150%;
  text-align: center;
  margin: 0;
  color: rgba(255,255,255,0.5);
}

.landing-actions{
  display:flex;
  flex-direction: column;
  gap: var(--gap);
  width: 100%;
  margin-top: 14px;
}

/* Button system (Josh spec) */
.button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  height: 64px;
  border-radius: 12px;
  font-size: 20px;
  font-weight: 600;
  text-decoration: none;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
  width: 100%;
}

.button--primary {
  background-color: #006aff;
  color: #ffffff;
  border: none;
}

.button--outline {
  background: transparent;
  color: #ffffff;
  border: 2px solid var(--button-gradient-end);
}

.button:hover {
  transform: translateY(-2px);
  box-shadow: 0 10px 20px rgba(0, 106, 255, 0.25);
}

.button:focus {
  outline: 2px solid rgba(0, 106, 255, 0.6);
  outline-offset: 2px;
}
